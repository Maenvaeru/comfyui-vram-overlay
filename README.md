# MVU VRAM Overlay for ComfyUI

**MVU VRAM Overlay** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —É–∑–ª–æ–≤ (Custom Node) –¥–ª—è [ComfyUI](https://github.com/comfyanonymous/ComfyUI), –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç –ª–µ–≥–∫–∏–π, –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ–ø–∞–º—è—Ç–∏ (VRAM) –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤, —ç—Ç–æ—Ç –æ–≤–µ—Ä–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ **–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å**, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ—Ä–∏–∑–æ–≤ ("–∑–∞–º–∏—Ä–∞–Ω–∏–π") –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ComfyUI, –¥–∞–∂–µ –ø—Ä–∏ —Ç—è–∂–µ–ª—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏—è—Ö.

---

## üöÄ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   **–í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å:** –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –¥—Ä–∞–π–≤–µ—Ä–∞ NVIDIA —á–µ—Ä–µ–∑ `NVML` (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `nvidia-ml-py`), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏, –¥–æ—Å—Ç—É–ø–Ω–æ–π –¥–ª—è CUDA.
*   **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –û–≤–µ—Ä–ª–µ–π –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å (`subprocess`). –°–±–æ–π –∏–ª–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–µ –æ–≤–µ—Ä–ª–µ—è –Ω–∏–∫–∞–∫ –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞ ComfyUI.
*   **–ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å:** –û–≤–µ—Ä–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å ComfyUI –ø–æ PID –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É.
*   **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –æ–∫–Ω–æ "–ø–æ–≤–µ—Ä—Ö –≤—Å–µ—Ö –æ–∫–æ–Ω" (Always On Top), –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ –¥–ª—è –∫–ª–∏–∫–æ–≤ –º—ã—à–∏ (Click-through), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –µ–≥–æ –ø–æ–≤–µ—Ä—Ö —Ä–∞–±–æ—á–µ–π –æ–±–ª–∞—Å—Ç–∏ –Ω–æ–¥.
*   **MVC –ü–∞—Ç—Ç–µ—Ä–Ω:** –ö–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Model-View-Controller –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –ª–µ–≥–∫–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   **OS:** Windows 10/11 (Linux –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ X11/Wayland –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ Qt).
*   **GPU:** NVIDIA (GeForce / Quadro / Tesla).
*   **Python:** 3.10+
*   **ComfyUI:** –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è.

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É `custom_nodes` –≤–∞—à–µ–π –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏ ComfyUI –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
cd ComfyUI/custom_nodes
git clone https://github.com/MaenVaerU/MVU-VRAM-Overlay.git
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ `MVU-VRAM-Overlay`.

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

‚ö†Ô∏è **–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π —à–∞–≥.** –û–≤–µ—Ä–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `PyQt6` –¥–ª—è GUI –∏ `nvidia-ml-py` –¥–ª—è —Å–≤—è–∑–∏ —Å –¥—Ä–∞–π–≤–µ—Ä–æ–º. –ò—Ö –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ —Ç–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ComfyUI.

#### –î–ª—è ComfyUI Portable (Windows)
–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—É—é –≤–µ—Ä—Å–∏—é, –∫–æ–º–∞–Ω–¥—ã –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä:

```bash
cd ComfyUI/custom_nodes/MVU-VRAM-Overlay
..\..\python_embeded\python.exe -m pip install -r requirements.txt
```

#### –î–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python (venv/conda)
–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∞—à–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd ComfyUI/custom_nodes/MVU-VRAM-Overlay
pip install -r requirements.txt
```

---

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ ComfyUI.
2.  –ù–∞–∂–º–∏—Ç–µ **–ü—Ä–∞–≤—É—é –∫–Ω–æ–ø–∫—É –º—ã—à–∏** –Ω–∞ –ø—É—Å—Ç–æ–º –º–µ—Å—Ç–µ —Ä–∞–±–æ—á–µ–π –æ–±–ª–∞—Å—Ç–∏ -> **Add Node**.
3.  –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –º–µ–Ω—é: **MVU** -> **Utils**.
4.  –í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª **MVU VRAM Monitor**.
5.  **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
    *   –£–∑–µ–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ "Pass-through" (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å–∏–≥–Ω–∞–ª). –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –µ–≥–æ –≤ –ª—é–±–æ–µ –º–µ—Å—Ç–æ —Ü–µ–ø–æ—á–∫–∏, –Ω–æ —ç—Ç–æ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.
    *   –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å —É–∑–µ–ª –Ω–∞ –ø–æ–ª–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `enabled` –≤ `True`.
6.  **–ó–∞–ø—É—Å–∫:**
    *   –ù–∞–∂–º–∏—Ç–µ **Queue Prompt**.
    *   –í –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –ø–æ—è–≤–∏—Ç—Å—è –∑–µ–ª–µ–Ω—ã–π —Ç–µ–∫—Å—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–≤–æ–±–æ–¥–Ω–æ–π VRAM.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
*   –ß—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å –æ–≤–µ—Ä–ª–µ–π, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ `enabled` –≤ `False` –∏ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ **Queue Prompt**.
*   –û–≤–µ—Ä–ª–µ–π –∑–∞–∫—Ä–æ–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∫–æ–Ω—Å–æ–ª–∏ ComfyUI.

---

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

*   **`nodes.py` (Controller - Host):**
    *   –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å ComfyUI.
    *   –†–µ–∞–ª–∏–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω Singleton (`OverlayProcessManager`) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.
    *   –£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –¥–æ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.

*   **`mvu_overlay_app.py` (View & Model - Client):**
    *   –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ PyQt6.
    *   **Model:** –ö–ª–∞—Å—Å—ã `VramMonitorModel` (NVML –≤—Ä–∞–ø–ø–µ—Ä) –∏ `ProcessMonitorModel` (—Å–ª–µ–∂–µ–Ω–∏–µ –∑–∞ PID).
    *   **View:** –ö–ª–∞—Å—Å `VramOverlayView` (–±–µ–∑—Ä–∞–º–æ—á–Ω–æ–µ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ –æ–∫–Ω–æ).
    *   **Controller:** –ö–ª–∞—Å—Å `OverlayController` (—Ç–∞–π–º–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –ª–æ–≥–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è).

*   **`__init__.py`:**
    *   –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É–∑–ª–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ ComfyUI.
    *   –ú–∞–ø–ø–∏–Ω–≥ –∏–º–µ–Ω –∫–ª–∞—Å—Å–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π.

---

## ‚ùì –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**1. –û–≤–µ—Ä–ª–µ–π –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:**
*   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å ComfyUI. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `ModuleNotFoundError`, –∑–Ω–∞—á–∏—Ç, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥ "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π".
*   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—É—Å–∫ Python-—Å–∫—Ä–∏–ø—Ç–æ–≤ –∏–∑ –ø–∞–ø–∫–∏ `custom_nodes`.

**2. –û—à–∏–±–∫–∞ "NVML Shared Library Not Found":**
*   –£ –≤–∞—Å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã –¥—Ä–∞–π–≤–µ—Ä—ã NVIDIA. –û–±–Ω–æ–≤–∏—Ç–µ –¥—Ä–∞–π–≤–µ—Ä –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏.

**3. –¢–µ–∫—Å—Ç "VRAM: Err":**
*   –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ GPU. –í–æ–∑–º–æ–∂–Ω–æ, –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ –∑–∞–Ω—è—Ç–∞ –¥—Ä—É–≥–∏–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∏–ª–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è NVML (–æ—á–µ–Ω—å —Å—Ç–∞—Ä—ã–µ –º–æ–¥–µ–ª–∏).

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT**.
–ê–≤—Ç–æ—Ä: **MVU**